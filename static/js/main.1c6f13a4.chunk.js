(this["webpackJsonpbeejee-test"]=this["webpackJsonpbeejee-test"]||[]).push([[0],{184:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),s=n(28),i=n.n(s),o=n(7),u=n(70),l=n.n(u),b="\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f",j="\u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f",d="\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",p="id",f="E-mail",m="\u0421\u0442\u0430\u0442\u0443\u0441",x="\u0422\u0435\u043a\u0441\u0442",O="\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",h="\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435:",k="\u0421\u0435\u0442\u0435\u0432\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430...",v="\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445",g="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443",_="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email",w="\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e",y="\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0430\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",N="\u0417\u0430\u0434\u0430\u0447\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430",C="\u0417\u0430\u0434\u0430\u0447\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430",S="\u0417\u0430\u0434\u0430\u0447\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430",A="\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",P="\u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",E="\u043f\u0430\u0440\u043e\u043b\u044c",I="\u0412\u043e\u0439\u0442\u0438",T="\u0412\u044b\u0439\u0442\u0438",F="\u0438\u0437\u043c.",D="\u0437\u0430\u0432\u0435\u0440\u0448.",M="\u0441\u043e\u0445\u0440.",V="\u043e\u0442\u043c.",J=Object(a.memo)(Object(o.b)((function(e){return{message:e.message}}))((function(e){var t=e.message,n=t.type,a=t.text;return Object(r.jsxs)("div",{children:[h," ",Object(r.jsx)("span",{className:n?l.a[n]:void 0,children:a})]})})));var R=n(2),G=n.n(R),L=n(3),U=n(9),W=n(29),z=n(6),Z="https://uxcandy.com/~shapoval/test-task-backend/v2/",q="Name";function B(e){return H.apply(this,arguments)}function H(){return(H=Object(L.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams(Object.assign({developer:q},t)),e.abrupt("return",X(Z+"?"+n.toString(),{method:"get"}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(L.a)(G.a.mark((function e(t,n){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams({developer:q}),e.abrupt("return",X(Z+t+"?"+r.toString(),Object(U.a)(Object(U.a)({},n),{},{method:"post"})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(L.a)(G.a.mark((function e(t,n){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye(!0),e.prev=1,e.t0=$,e.next=5,fetch(t,n).then((function(e){return e.json()}));case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:return e.prev=9,e.t2=e.catch(1),ye(!1),ee(),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function $(e){return ye(!1),"ok"===e.status?e.message||!0:(t=e.message,Se("error","+".concat(v,": ").concat(JSON.stringify(t))),null);var t}function ee(){Se("error",k)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(L.a)(G.a.mark((function e(t){var n,r,a,c,s,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new FormData,r=0,a=Object.entries(t);r<a.length;r++)c=Object(z.a)(a[r],2),s=c[0],i=c[1],n.append(s,i);return e.abrupt("return",K("create",{body:n}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(L.a)(G.a.mark((function e(t,n){var r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("username",t),r.append("password",n),e.abrupt("return",K("login",{body:r}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t){return se.apply(this,arguments)}function se(){return(se=Object(L.a)(G.a.mark((function e(t,n){var r,a,c,s,i,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new FormData,a=0,c=Object.entries(n);a<c.length;a++)s=Object(z.a)(c[a],2),i=s[0],void 0!==(o=s[1])&&r.append(i,o.toString());return e.abrupt("return",K("edit/".concat(t),{body:r}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie,oe="APP_PAGE_LOADED",ue="APP_MESSAGE",le="APP_AUTH",be="APP_WAITING";function je(e){return{type:oe,payload:e}}function de(e,t){return{type:ue,payload:{type:e,text:t}}}function pe(e){return e?localStorage.setItem("token",e):localStorage.removeItem("token"),{type:le,payload:{token:e}}}var fe={list:[],total:0,page:0,waiting:!1,token:localStorage.getItem("token")||"",ordered:{columnName:"id",direction:"asc"},message:{text:"",type:null}},me=Object(W.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:case be:case le:return Object(U.a)(Object(U.a)({},e),t.payload);case ue:return Ne(e,t.payload);default:return e}})),xe=me.dispatch;function Oe(e,t){xe(je({list:e,total:t,page:1,ordered:{direction:"asc",columnName:"id"}}))}function he(){return ke.apply(this,arguments)}function ke(){return(ke=Object(L.a)(G.a.mark((function e(){var t,n,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ge(),n=ve(),e.next=4,B({sort_direction:t.direction,sort_field:t.columnName,page:n});case 4:(r=e.sent)&&xe(je({list:r.tasks,total:+r.total_task_count,page:n,ordered:t}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return me.getState().page}function ge(){return me.getState().ordered}function _e(){return me.getState().waiting}function we(){var e=!!localStorage.getItem("token");return me.getState().token&&!e&&(xe(pe("")),Se("error",y)),e}function ye(e){xe({type:be,payload:{waiting:e}})}function Ne(e,t){return clearTimeout(ie),ie=setTimeout(Ce,5e3),Object(U.a)(Object(U.a)({},e),{},{message:t})}function Ce(){clearTimeout(ie),xe(de(null,""))}function Se(e,t){xe(de(e,t))}var Ae=n(31),Pe=n.n(Ae),Ee=Object(a.memo)(Object(o.b)((function(e){return{total:e.total,page:e.page}}))((function(e){var t=e.total,n=e.page,c=e.dispatch,s=Math.round(t/3),i=Object(a.useRef)(),o=Object(a.useRef)(null),u=Object(a.useCallback)(function(){var e=Object(L.a)(G.a.mark((function e(t){var n,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_e()){e.next=2;break}return e.abrupt("return");case 2:if(!(t<1||t>s)){e.next=4;break}return e.abrupt("return");case 4:return n=ge(),e.next=7,B({sort_direction:n.direction,sort_field:n.columnName,page:t});case 7:(r=e.sent)&&c(je({list:r.tasks,total:+r.total_task_count,page:t,ordered:n}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,c]),l=Object(a.useCallback)((function(){u(n+1)}),[u,n]),d=Object(a.useCallback)((function(){u(n-1)}),[u,n]);Object(a.useEffect)((function(){o.current&&(o.current.value=n+"")}),[n]);var p=Object(a.useCallback)((function(e){var t=e.currentTarget.valueAsNumber;isNaN(t)||t<1||t>s||(clearTimeout(i.current),i.current=setTimeout(u,800,t))}),[i,u,s]);return Object(r.jsxs)("div",{className:Pe.a.block,children:[Object(r.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439: ",t,Object(r.jsx)("br",{}),"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430: ",Object(r.jsx)("input",{ref:o,min:1,max:s,step:1,onChange:p,type:"number",className:Pe.a.input})," / ",s]}),Object(r.jsx)("div",{className:Pe.a.space}),Object(r.jsx)("button",{title:j,onClick:d,disabled:1===n,children:"\u2190"}),Object(r.jsx)("button",{title:b,onClick:l,disabled:n===s,children:"\u2192"})]})})));var Ie=n(21),Te=n.n(Ie),Fe=n(16);function De(e){return e.trim()}var Me=["id","username","email","status","text","image_path"],Ve={id:{label:p,sortable:!0,width:4,center:!0},username:{label:d,sortable:!0,width:10,center:!0},email:{label:f,sortable:!0,width:10,center:!1},status:{label:m,sortable:!0,width:4,center:!0},text:{label:x,sortable:!1,width:15,center:!1,editable:!0},image_path:{label:O,sortable:!1,width:4,center:!0}};function Je(){return Object(r.jsxs)("table",{className:Te.a.table,children:[Object(r.jsx)(Re,{}),Object(r.jsx)(Ue,{})]})}var Re=Object(a.memo)(Object(o.b)((function(e){return{token:e.token}}))((function(e){var t=e.token;return Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Me.map((function(e){return Object(r.jsx)(Ge,Object(U.a)({colName:e},Ve[e]),e)})),t?Object(r.jsx)("th",{}):null]})})})));var Ge=Object(a.memo)(Object(o.b)((function(e){return{ordered:e.ordered}}))((function(e){var t=e.label,n=e.sortable,c=e.colName,s=e.ordered,i=e.dispatch,o=Object(a.useCallback)(Object(L.a)(G.a.mark((function e(){var t,n,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_e()){e.next=2;break}return e.abrupt("return");case 2:return t=c===s.columnName&&"asc"===s.direction?"desc":"asc",n=ve(),e.next=6,B({sort_direction:t,sort_field:c,page:n});case 6:(r=e.sent)&&i(je({list:r.tasks,total:+r.total_task_count,page:n,ordered:{direction:t,columnName:c}}));case 8:case"end":return e.stop()}}),e)}))),[c,i,s]);return Object(r.jsxs)("th",{onClick:n?o:void 0,className:n?Te.a.active:void 0,children:[Object(r.jsx)(Le,{colName:c,ordered:s}),t]})})));function Le(e){var t=e.colName,n=e.ordered,a=n.columnName,c=n.direction;return t===a?Object(r.jsx)("span",{children:"asc"===c?"\u2193":"\u2191"}):null}var Ue=Object(a.memo)(Object(o.b)((function(e){return{list:e.list,token:e.token}}))((function(e){var t=e.list,n=e.token;return Object(r.jsx)("tbody",{children:t.map((function(e){return Object(r.jsx)(We,{row:e,token:n},e.id)}))})})));function We(e){var t=e.row,n=e.token,c=Object(Fe.a)(),s=c.register,i=c.getValues,o=Object(a.useState)(!1),u=Object(z.a)(o,2),l=u[0],b=u[1],j=Object(a.useCallback)((function(){b(!0)}),[b]),d=Object(a.useCallback)((function(){b(!1)}),[]),p=Object(a.useCallback)(Object(L.a)(G.a.mark((function e(){var r,a,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!1),we()){e.next=3;break}return e.abrupt("return");case 3:return r=i(),a=De(a=r.text),c=10*Math.floor(t.status/10)+1,e.next=8,ce(t.id,{token:n,text:a,status:c});case 8:if(!e.sent){e.next=13;break}return e.next=12,he();case 12:Se("info",C);case 13:case"end":return e.stop()}}),e)}))),[i,t,n]),f=Object(a.useCallback)(Object(L.a)(G.a.mark((function e(){var r,a,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!1),we()){e.next=3;break}return e.abrupt("return");case 3:return r=i(),a=De(a=r.text),c=10+t.status%10,e.next=8,ce(t.id,{token:n,text:a,status:c});case 8:if(!e.sent){e.next=13;break}return e.next=12,he();case 12:Se("info",S);case 13:case"end":return e.stop()}}),e)}))),[i,t,n]);return Object(r.jsxs)("tr",{className:Te.a.row,children:[Me.map((function(e){return Object(r.jsx)("td",{style:{width:"".concat(Ve[e].width,"em"),maxWidth:"".concat(Ve[e].width,"em"),textAlign:Ve[e].center?"center":void 0},title:t[e],children:Object(r.jsx)(ze,{label:e,row:t,modify:l,register:s},e)})})),n?Object(r.jsx)("td",{children:l?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:p,children:M}),Object(r.jsx)("button",{onClick:d,children:V}),Object(r.jsx)("button",{onClick:f,children:D})]}):Object(r.jsx)("button",{onClick:j,children:F})}):null]})}function ze(e){var t=e.label,n=e.row,a=e.modify,c=e.register;return t.startsWith("image")?Object(r.jsx)("img",{src:n[t],className:Te.a.icon,alt:""}):Object(r.jsx)(r.Fragment,{children:a&&Ve[t].editable?Object(r.jsx)("input",{name:t,defaultValue:n[t],ref:c}):n[t]})}function Ze(){return(Ze=Object(L.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se("info","\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445"),e.next=3,B({page:1,sort_direction:"asc",sort_field:"id"});case 3:(t=e.sent)&&(Oe(t.tasks,+t.total_task_count),Ce());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe=n(71),Be=n.n(qe),He=n(45),Ke=He.a().shape({email:He.b().email().required()});function Qe(){var e=Object(Fe.a)(),t=e.register,n=e.getValues,c=e.reset,s=Object(a.useCallback)(Object(L.a)(G.a.mark((function e(){var t,r,a,s,i,o;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(),r=t.username,a=t.email,s=t.text,r=De(r),s=De(s),i=!1,e.prev=4,e.next=7,Ke.validate({email:a});case 7:i=e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:if(!(i&&r&&s)){e.next=27;break}return e.next=15,te({username:r,text:s,email:a});case 15:if(!(o=e.sent)){e.next=25;break}if(!o.id){e.next=24;break}return Se("info",N),c({username:"",email:"",text:""}),e.next=22,he();case 22:e.next=25;break;case 24:Se("error",JSON.stringify(o));case 25:e.next=28;break;case 27:Se("error",i?w:_);case 28:case"end":return e.stop()}}),e,null,[[4,10]])}))),[n,c]);return Object(r.jsxs)("table",{className:Be.a.block,children:[Object(r.jsxs)("tr",{children:[Object(r.jsxs)("td",{children:[d,":"]}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{name:"username",ref:t})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsxs)("td",{children:[f,":"]}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{name:"email",ref:t})})]}),Object(r.jsxs)("tr",{children:[Object(r.jsxs)("td",{children:[x,":"]}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{name:"text",ref:t})})]}),Object(r.jsx)("tr",{children:Object(r.jsx)("td",{colSpan:2,children:Object(r.jsx)("button",{onClick:s,children:g})})})]})}var Xe=n(32),Ye=n.n(Xe),$e=Object(a.memo)(Object(o.b)((function(e){return{token:e.token}}))((function(e){var t=e.token,n=e.dispatch;return t?Object(r.jsx)(et,{dispatch:n}):Object(r.jsx)(tt,{dispatch:n})})));function et(e){var t=e.dispatch,n=Object(a.useCallback)((function(){t(pe(""))}),[t]);return Object(r.jsx)("div",{className:Ye.a.block,children:Object(r.jsx)("button",{onClick:n,children:T})})}function tt(e){var t=e.dispatch,n=Object(Fe.a)(),c=n.register,s=n.getValues,i=Object(a.useCallback)(Object(L.a)(G.a.mark((function e(){var n,r,a,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s(),r=n.user_name,a=n.user_pass,r=r.trim(),a=a.trim(),e.next=5,re(r,a);case 5:(c=e.sent)&&t(pe(c.token));case 7:case"end":return e.stop()}}),e)}))),[s,t]);return Object(r.jsxs)("div",{className:Ye.a.block,children:[Object(r.jsxs)("span",{className:Ye.a.label,children:[A,":"]}),Object(r.jsx)("input",{placeholder:P,name:"user_name",ref:c}),Object(r.jsx)("input",{placeholder:E,name:"user_pass",ref:c}),Object(r.jsx)("button",{onClick:i,children:I})]})}function nt(){return Object(a.useEffect)((function(){!function(){Ze.apply(this,arguments)}()}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(J,{}),Object(r.jsx)(Je,{}),Object(r.jsx)(Ee,{}),Object(r.jsx)(Qe,{}),Object(r.jsx)($e,{})]})}i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(o.a,{store:me,children:Object(r.jsx)(nt,{})})}),document.getElementById("root"))},21:function(e,t,n){e.exports={icon:"table_icon__2Imo9",active:"table_active__hX7zo",table:"table_table__3AulV",row:"table_row__-PzFE"}},31:function(e,t,n){e.exports={block:"total_block__21m97",space:"total_space__3ZC3a",input:"total_input__YgjKk"}},32:function(e,t,n){e.exports={block:"auth_block__2CC3a",label:"auth_label__33o7Z"}},70:function(e,t,n){e.exports={info:"message_info__2MbjQ",error:"message_error__ge_rF"}},71:function(e,t,n){e.exports={block:"append_block__2xvpr"}}},[[184,1,2]]]);
//# sourceMappingURL=main.1c6f13a4.chunk.js.map